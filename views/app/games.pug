extends ../shared/master

block append head
    link(rel="stylesheet", type="text/css", href="//cdn.jsdelivr.net/gh/kenwheeler/slick@1.8.1/slick/slick.css")
    link(rel="stylesheet", type="text/css", href="//cdn.jsdelivr.net/gh/kenwheeler/slick@1.8.1/slick/slick-theme.css")
    link(rel="stylesheet", type="text/css", href='/public/assets/styles/games/single.game.css')

block append scripts
    script(src="//cdn.jsdelivr.net/gh/kenwheeler/slick@1.8.1/slick/slick.min.js")
    script(src="/public/assets/js/games/single.game.js")

block content
    div#index-banner.parallax-container
        div.section.no-pad-bot
            div.container
                div.row
                    br
                    br
                    img.game-cover.col.m6.s12(src=gameObj.cover)
                    h1.header.teal-text.text-lighten-2.col.s12.m6.left-align
                        | #{gameObj.name}
                    div.center
                        h5.header.col.s12.m6.light.left-align
                            | Release date: #{gameObj.releaseDate}
                    div.center
                        h5.header.col.s12.m6.light.left-align
                            p.publisher
                                | Publisher: 
                                each publisher, index in gameObj.Publishers
                                    a(href="#")
                                        | #{publisher.name}
                                    if index < gameObj.Publishers.length - 1
                                        span
                                            | , 
                    br
                    br
        div.parallax
            if gameObj.cover
                img(src=gameObj.cover)
            else
               img(src="/public/assets/img/geforce-now-gamewall-v2.png") 
    div.container
        div.section
            div.row
                div.col.s12.m8
                    div.icon-block
                        h5.center
                            | About
                        p.genre
                            | Genre: 
                            each genre, index in gameObj.Genres
                                a(href="#")
                                    | #{genre.name}
                                if index < gameObj.Genres.length - 1
                                    span
                                        | , 
                        p.platform
                            | Platforms:
                            each platform, index in gameObj.Platforms
                                a(href="#")
                                    | #{platform.name}
                                if index < gameObj.Platforms.length - 1
                                    span
                                        | , 
                        p.light
                            | #{gameObj.summary}
                form(action="/:name", method="post")
                    div.col.s12.m4
                        h5.center
                            | How would you rate this game?
                        .row
                            .col.s8.center-align.offset-s2
                                .card-panel.yellow
                                    h5.black-text.center.avg-rating
                                        if avgRating > 0
                                            | #{avgRating}
                                        else
                                            | 0.0
                                    p.user-count
                                        | Based on #{userCount} user ratings
                        p.rating.center
                            span#rate0.small.material-icons.mdi.mdi-star-outline.hide
                            span#rate1.small.material-icons.mdi.mdi-star-outline.rate.mdi-dark(data-rating=1)
                            span#rate2.small.material-icons.mdi.mdi-star-outline.rate.mdi-dark(data-rating=2)
                            span#rate3.small.material-icons.mdi.mdi-star-outline.rate.mdi-dark(data-rating=3)
                            span#rate4.small.material-icons.mdi.mdi-star-outline.rate.mdi-dark(data-rating=4)
                            span#rate5.small.material-icons.mdi.mdi-star-outline.rate.mdi-dark(data-rating=5)
                            span#rate6.small.material-icons.mdi.mdi-star-outline.rate.mdi-dark(data-rating=6)
                            span#rate7.small.material-icons.mdi.mdi-star-outline.rate.mdi-dark(data-rating=7)
                            span#rate8.small.material-icons.mdi.mdi-star-outline.rate.mdi-dark(data-rating=8)
                            span#rate9.small.material-icons.mdi.mdi-star-outline.rate.mdi-dark(data-rating=9)
                            span#rate10.small.material-icons.mdi.mdi-star-outline.rate.mdi-dark(data-rating=10)
                            span#rate11.small.material-icons.mdi.mdi-star-outline.hide
                        div.view-rating.center-align
                            | Need more ratings
    div.wr-slider
        div.carousel.carousel-slider
            if gameObj.Screenshots.length > 0
                each screenShot in gameObj.Screenshots
                    div.game-box.carousel-item
                        img(src=screenShot.url).game-pic
                        //- | #{screenShot.url}
            else
                div.game-box.carousel-item
                    img(src="#").game-pic
            if gameObj.Videos.length > 0
                each video in gameObj.Videos
                    div.game-box.carousel-item
                        - var embededUrl = video.url.replace('watch?v=', 'embed/');
                        iframe(src=embededUrl).game-pic
                        //- img(src=video.url).game-pic
                        //- | #{embededUrl}
            else
                div.game-box.carousel-item
                    img(src="#").game-pic
    div.container.z-depth-1
        .col.s12
            h4.header 
                | Reviews
                .card.horizontal
                    .card-stacked
                        .card-content
                            form.col.s12
                                div.input-field.col.s12
                                    textarea#textarea1.materialize-textarea
                                    label(for='textarea1') Write a review...
                        .card-action
                            button.btn.waves-effect.waves-light.right(type='submit', name='action')
                                | Submit
                                i.material-icons.right send
